# Неделя 19. Асинхронность и работа с API

Created: December 23, 2023 1:37 PM

1. Опишите разницу между синхронными и асинхронными функциями.
    
    Синхронные функции выполняются строго по порядку и не могут запустить следующую пока не закончили с прошлой. Асинхронные функции способны запускать следующую функцию пока выполняют прошлую
    
2. Сравните подходы работы с асинхронным кодом: сallbacks vs promises vs async / await
    
    Колбэки базовый способ работы с асинхронностью, однако могут привести к аду колбеков и сделать код практически нечитаемым.
    
    Промисы более удобны при работе с асинхронностью, однако также могут привести код к нечитаемому виду с помощью большого количества .then
    
    Async/await на сегодняшний день наиболее удобен при работе с асинхронностью, так как позволяет написать код таким образом как будто он синхронный.
    
3. Что такое цикл событий (event loop) в JS ?
    
    Цикл событий (event loop) в JavaScript — это механизм, который позволяет JavaScript-движку выполнять асинхронные операции и управлять ими, несмотря на то, что сам JavaScript является однопоточным языком программирования. Он отвечает за то, чтобы код выполнялся в правильном порядке, асинхронные операции завершались в нужное время, и интерфейс пользователя оставался отзывчивым.
    
4. Какая разница между «стеком вызовов» (call stack) и «очередью задач» (task queue)?
    
    Основное отличие между стеком вызовов и очередью задач заключается в том, что стек вызовов используется для управления выполнением синхронного кода, в то время как очередь задач используется для управления асинхронными событиями. Это позволяет JavaScript обрабатывать асинхронные операции, не блокируя основной поток выполнения, что обеспечивает отзывчивость веб-приложений.
    
5. Какие версии HTTP-протокола вам известны?
    - HTTP/0.9: Простейшая версия, поддерживающая только GET-запросы.
    - HTTP/1.0: Версия с расширенными возможностями, включая новые методы запросов и заголовки.
    - HTTP/1.1: Наиболее широко используемая версия, включающая поддержку постоянных соединений, кэширования и более эффективную обработку ошибок.
    - HTTP/2: Более новая версия, фокусирующаяся на улучшении производительности через механизмы мультиплексирования, сжатия заголовков и приоритизации запросов.
    - HTTP/3: Последняя версия, которая использует протокол QUIC вместо TCP для уменьшения задержек и улучшения производительности в условиях нестабильного соединения.
6. Какие знаете коды ответа (состояния) HTTP?
    - **1xx (Информационные):** 100 Continue, 101 Switching Protocols.
    - **2xx (Успешные):** 200 OK, 201 Created, 204 No Content.
    - **3xx (Перенаправление):** 301 Moved Permanently, 302 Found, 304 Not Modified.
    - **4xx (Ошибка** **клиента):** 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 409 Conflict.
    - **5xx (Ошибка** **сервера):** 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable, 504 Gateway Timeout.
7. Как клиент взаимодействует с сервером?
    
    Клиент (обычно веб-браузер) отправляет HTTP-запрос на сервер. Запрос включает в себя метод (GET, POST, PUT, DELETE и др.), URL, версию протокола HTTP, заголовки и тело запроса (если необходимо). Сервер обрабатывает запрос и отправляет обратно HTTP-ответ, который содержит статусный код ответа, заголовки и тело ответа (если необходимо).
    
8. Самостоятельно разберитесь, что такое Cross-Origin Resource Sharing? Как устранить проблемы с CORS?
    
    CORS — это механизм, позволяющий разрешать или запрещать запросы к ресурсам на другом домене относительно домена исходного запроса. Проблемы с CORS возникают, когда веб-страница пытается сделать запрос к ресурсу, который находится на другом домене, и сервер не включает соответствующие заголовки CORS в ответ.
    
    **Решение проблем с CORS:**
    
    Сервер должен добавить заголовок Access-Control-Allow-Origin со значением * или конкретным доменом, с которого разрешены запросы.
    
    Для более сложных запросов (таких как использование методов PUT, DELETE или кастомных заголовков) сервер должен также обрабатывать предварительные запросы (preflight requests), отправляемые с методом OPTIONS, и отвечать с соответствующими заголовками Access-Control-Allow-Methods и Access-Control-Allow-Headers.
    
9. Самостоятельно разберитесь, что такое REST?
    
    REST — это архитектурный стиль проектирования веб-сервисов, который использует стандартные HTTP-методы и принципы для обмена данными между клиентом и сервером. RESTful веб-сервисы обычно используют URL для идентификации ресурсов и HTTP-методы (GET, POST, PUT, DELETE) для операций над ними.
    
10. Как посмотреть заголовки запроса к странице или API?
    
    Заголовки запроса можно посмотреть с помощью инструментов разработчика в веб-браузере:
    
    - Открыть инструменты разработчика (F12 или Ctrl+Shift+I).
    - Перейти на вкладку "Сеть" (Network).
    - Обновить страницу или выполнить запрос к API.
    - Кликнуть на соответствующий запрос в списке, чтобы увидеть детали запроса, включая заголовки.
11. Что можно писать в параметре заголовков Content-Type ?
    
    Заголовок Content-Type указывает тип данных в теле запроса/ответа. Некоторые примеры значений:
    
    - text/html для HTML-документов.
    - application/json для JSON-данных.
    - multipart/form-data для форм, содержащих файлы.
    - application/x-www-form-urlencoded для форм, данные которых закодированы как URL.
12. Давайте отправим информацию о собачке в API по адресу localhost/pets/add
13. JSON с информацией о собаке:
    
    ```json
    {
      breed: "Beagle",
      size: "large",
      color: "orange",
      age: 6
    }
    ```
    
14. Как будет выглядеть fetch в таком случае

```jsx
fetch('http://localhost/pets/add', {
  method: 'POST', // Указываем метод запроса
  headers: {
    'Content-Type': 'application/json', // Указываем тип содержимого в теле запроса
  },
  body: JSON.stringify({ // Преобразуем данные о собаке в строку JSON
    breed: "Beagle",
    size: "large",
    color: "orange",
    age: 6
  })
})
```